1. Нужно создать Docker image на базе Ubuntu 22.04 содержащий в себе все установленные программы и настройки, описанные в файле "serverUp.sh". "serverUp.sh" - это не исполняемый sh скрипт, а набор команд, выполняемых из терминала.

2. Добавить в Volumes файлы:
	- /etc/ocserv/ocserv.conf - конфигурация сервера ocserv
	- /etc/ocserv/ssl/ - папка с ключами ЦС, сервера, клиентов

3. Создание и хранение ключей будет реализовано в бд на отдельном сервере, вместе с telegramm ботом (занимаюсь)



************************ 13.02.24 *************************************

Комментарии:
 
---------------------------------------------------------------
 
1) Создание и хранение ключи, сертификатов : 
 
Все ключи и сертификаты будут создаваться в python с использованием пакета cryptography и будут храниться на сервере с телеграмм ботом. Сделано это для того, чтобы при запросе на генерацию от клиента можно было управлять кол-вом клиентов на удаленных серверах с ocserv.

На сервере telegramm бота развернут docker-compose с контейнерами telegramm бота и БД postgresql

---------------------------------------------------------------
 
2) Шаблон для сервера имеет вид:

organization = "Server Org"
cn = "server"
serial = 002
expiration_days = 3650
ca
signing_key
encryption_key
tls_www_server
ip_address = "5.101.44.90"

Здесь указан ip адрес сервера. Если сервер окажется недоступен и придется его менять, то всем клиентам придется перевыпускать сертификаты, так как все они будут подписаны ключом этого сервера. 

Решение:

Нужен зарубежный домен, который можно привязывать к любому ip, а поле ip_address = "" шаблона указать домен, например ip_address = "myvpn.com"

В этом случае достаточно будет развернуть сервер на новом ip и "подсунуть" ему ключи и сертификаты, созданные ранее. Все сертификаты клиентов будут по прежнему доступны.

---------------------------------------------------------------

3) Содержимое Файла /etc/init.d/ocserv взял с сайта и подробно еще не разбирал. Если с чем-то не согласен, смело меняй)

